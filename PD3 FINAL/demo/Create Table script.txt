DROP TABLE IF EXISTS DVD;
DROP TABLE IF EXISTS JOURNAL;
DROP TABLE IF EXISTS BOOK;

DROP TABLE IF EXISTS LIBRARIAN;
DROP TABLE IF EXISTS PUBLISHER;
DROP TABLE IF EXISTS DOCUMENT;
DROP TABLE IF EXISTS BORROWS;
DROP TABLE IF EXISTS MEMBER;
DROP TABLE IF EXISTS BRANCH;
DROP TABLE IF EXISTS LIBRARY;

CREATE TABLE LIBRARY(
LIBID INT(10) NOT NULL AUTO_INCREMENT, 
LNAME VARCHAR(20) NOT NULL,
PRIMARY KEY (LIBID)
);

DROP TABLE IF EXISTS BRANCH;

CREATE TABLE BRANCH(
BRID INT(10) NOT NULL AUTO_INCREMENT, 
BNAME VARCHAR(20) NOT NULL,
ADDRESS VARCHAR(20) NOT NULL,
PHNUM INT (50) NOT NULL,
LIBID INT(10) NOT NULL,
PRIMARY KEY (BRID), 
FOREIGN KEY (LIBID) REFERENCES LIBRARY(LIBID)
);


DROP TABLE IF EXISTS MEMBER;

CREATE TABLE MEMBER(
MEMID INT(10) NOT NULL AUTO_INCREMENT, 
NAME VARCHAR(20) NOT NULL,
PHONE BIGINT (200) NOT NULL,
EMAIL VARCHAR(100) NOT NULL,
ADDRESS VARCHAR(255),
PASSWORDS VARCHAR(255) NOT NULL,
ADMIN BOOLEAN NOT NULL,
BRID INT (10) NOT NULL,
PRIMARY KEY (MEMID),
FOREIGN KEY (BRID) REFERENCES BRANCH(BRID)
);



DROP TABLE IF EXISTS DOCUMENT;

CREATE TABLE DOCUMENT(
DOCID INT(10) NOT NULL AUTO_INCREMENT,
BRID INT(10) NOT NULL,
TYPE VARCHAR(50) NOT NULL,
TITLE VARCHAR (150) NOT NULL,
CREATOR VARCHAR (250) NOT NULL,
PRIMARY KEY (DOCID),
FOREIGN KEY (BRID) REFERENCES BRANCH(BRID)
);



DROP TABLE IF EXISTS PUBLISHER;

CREATE TABLE PUBLISHER(
PID INT(10) NOT NULL AUTO_INCREMENT,
NAME VARCHAR(20),
DOCID INT(10) NOT NULL, 
PRIMARY KEY (PID),
FOREIGN KEY(DOCID) REFERENCES DOCUMENT(DOCID)
);


DROP TABLE IF EXISTS BORROWS;

CREATE TABLE BORROWS(
BID INT(10) NOT NULL AUTO_INCREMENT,
BORROWED_ON DATETIME,
RETURNED_ON DATETIME,
MEMBERID INT(10) NOT NULL,
DOCID INT(10) NOT NULL,
PRIMARY KEY(BID),
FOREIGN KEY(MEMBERID) REFERENCES MEMBER(MEMID),
FOREIGN KEY(DOCID) REFERENCES DOCUMENT(DOCID)
);


DROP TABLE IF EXISTS BOOK;

CREATE TABLE BOOK(
ISBN VARCHAR(25) NOT NULL,
DOCID INT(10) NOT NULL,
PRIMARY KEY (ISBN), 
FOREIGN KEY (DOCID) REFERENCES DOCUMENT(DOCID)
);

DROP TABLE IF EXISTS JOURNAL;

CREATE TABLE JOURNAL(
JOURNALID INT(10) NOT NULL,
DOCID INT(10) NOT NULL,
PRIMARY KEY(JOURNALID), 
FOREIGN KEY(DOCID) REFERENCES DOCUMENT(DOCID)
);

DROP TABLE IF EXISTS DVD;

CREATE TABLE DVD(
DVDID INT(10) NOT NULL, 
DOCID INT(10) NOT NULL,
PRIMARY KEY (DVDID),
FOREIGN KEY (DOCID) REFERENCES DOCUMENT(DOCID)
);

